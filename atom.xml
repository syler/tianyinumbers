<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>1Few</title>
 <link href="http://www.1few.com/atom.xml" rel="self"/>
 <link href="http://www.1few.com/"/>
 <updated>2014-09-10T01:07:13+08:00</updated>
 <id>http://www.1few.com</id>
 <author>
   <name>syler</name>
   <email></email>
 </author>

 
 <entry>
   <title>解決Prism中嵌套的Region在RegionManager中找不到的問題</title>
   <link href="http://www.1few.com/2014/prism-nested-region-not-found-in-regionmanager"/>
   <updated>2014-08-25T00:00:00+08:00</updated>
   <id>http://www.1few.com/2014/prism-nested-region-not-found-in-regionmanager</id>
   <content type="html">&lt;p&gt;示意圖
&lt;img src=&quot;https://farm6.staticflickr.com/5576/15167455132_c62738dbc4_o.png&quot; alt=&quot;示意圖&quot; title=&quot;示意圖&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;section&quot;&gt;解釋&lt;/h2&gt;

&lt;p&gt;Region A裝載ModuleA，RegionB裝載ModuleB，Region C裝載Module C
其中，Module A內部還有 Region A1和A2，現在需要Region A1的內容導航爲其他內容。
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regionManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegisterViewWithRegion&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegionA1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegionA1Content1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;頁面可以正常顯示，RegionA1Content顯示在RegionA1中，但是用RequestNavigate進行導航時失敗，經查是由於RegionManager不存在RegionWizardMainContent這個Region。&lt;/p&gt;

&lt;p&gt;導航語句爲：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regionManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RequestNavigate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;RegionA1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;RegionA1Content2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;上一句是失敗的。&lt;/p&gt;

&lt;h2 id=&quot;section-1&quot;&gt;解決方法&lt;/h2&gt;

&lt;p&gt;使用RegionManager.SetRegionManager：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;n&quot;&gt;RegionManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SetRegionManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regionA1Region&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;regionManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>帮助选择电信手机号的小程序</title>
   <link href="http://www.1few.com/2014/tianyi-number-helper"/>
   <updated>2014-08-09T00:00:00+08:00</updated>
   <id>http://www.1few.com/2014/tianyi-number-helper</id>
   <content type="html">&lt;p&gt;点击Search，向电信网站索取数据，可以把获取次数调得大些，不过建议不超过1000次，因为同时发出1000个http请求，对服务器有压力，而且，次数越多重复的号码获取得越来越多，新号码就越来越少。&lt;/p&gt;

&lt;p&gt;Visual Studio 2013下开发，WPF/C#。
源代码在 &lt;a href=&quot;https://github.com/syler/tianyinumbers&quot;&gt;github&lt;/a&gt;，暂时没有提供编译好的二进制exe。
&lt;!--more--&gt;
&lt;img src=&quot;http://ww3.sinaimg.cn/large/4dcfc0e3gw1ek56p5u3htj20el09qmye.jpg&quot; alt=&quot;界面&quot; title=&quot;帮助用户选择号码的小程序&quot; /&gt;
Save可以将获取到的号码保存到一个文件&lt;/p&gt;

&lt;p&gt;绿色的Drag To Load Saved是将一个保存好的文件加载到程序中。&lt;/p&gt;

&lt;p&gt;过滤是从已获得的号码中筛选心仪的号码。&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Kindle 3文章在word中的设置</title>
   <link href="http://www.1few.com/2014/kindle3-page-settings-in-word"/>
   <updated>2014-08-02T00:00:00+08:00</updated>
   <id>http://www.1few.com/2014/kindle3-page-settings-in-word</id>
   <content type="html">&lt;p&gt;今天量了一下, kindle 3的屏幕大小是92*122毫米，每行显示23个字比较合适，页边距4面都是7毫米。雅黑字体显示合适。&lt;/p&gt;

&lt;p&gt;在word里设置页面的大小9.2x12.2厘米，调整字体10号，可能比较合适，嫌字大的还可尝试更小字号。&lt;/p&gt;

&lt;p&gt;使用思源黑体的话，可以尝试思源黑体Normal 9号字
&lt;!--more--&gt;
&lt;img src=&quot;http://ww4.sinaimg.cn/mw690/4dcfc0e3gw1ek59ajqdh7g20go0m80tv.gif&quot; alt=&quot;思源黑体Normal 9号字&quot; title=&quot;思源黑体Normal 9号字&quot; /&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>美如画R9第三代sigma 8671 TTL针脚电压图</title>
   <link href="http://www.1few.com/2013/magica-player-ttl"/>
   <updated>2013-02-20T00:00:00+08:00</updated>
   <id>http://www.1few.com/2013/2013-magica-player-ttl</id>
   <content type="html">&lt;p&gt;因为想用ttl刷机，受 &lt;a href=&quot;http://www.hdpfans.com/thread-116986-1-1.html&quot;&gt;hdpfans&lt;/a&gt; 那里的启发，感谢dragon。&lt;/p&gt;

&lt;p&gt;买了万用表对J110的电压进行测定，现在分享我的结果。
&lt;!--more--&gt;
J110四针插槽，笔者询问美如画得知，这个是TTL接口，但是没有标明引脚顺序，所以需要用万用表测量VCC端后才能尝试接入。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i45.tinypic.com/hrwm6f.jpg&quot; alt=&quot;美如画R9第三代sigma8671 TTL针脚电压&quot; title=&quot;美如画R9第三代sigma8671 TTL针脚电压&quot; /&gt;&lt;/p&gt;

&lt;p&gt;J111和J110的图:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i48.tinypic.com/11qh5ah.jpg&quot; alt=&quot;J110和J111&quot; title=&quot;J110和J111&quot; /&gt;
gnd/rx/tx接上后(线的接法：0v接gnd，5.29v的不要接，tx/rx可以自己交换着测试。)，可以看到下面的信息，但是无法输入任何东西，type c to quit AUTOBOOT按C也没有用。&lt;/p&gt;

&lt;p&gt;以下是console的输出结果&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;3cidxs3deaca4b67cdb5ffa460e0cdbf8b287060bb4366S

&lt;span class=&quot;c&quot;&gt;#xos2P68-100 (sfla 128kbytes. subid 0x00/db) [serial#b46b37a15b3a4922660c80a48078a15f]&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#stepxmb 0xcb - 3&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#chpll 0x01000024/0x00000201 -&amp;gt; 0x01000033/0x00000101... actual sys=351MHz&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#DRAM setup (method=0x10015858) ...&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#DRAM0 Window  :    0x#2a#29#2a#2a# (20)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#DRAM0 Settings: WD=0x0c0d0c0c RG=0x0b0b0b0b RR=0x0b0b0b0b RF=0x0d0d0d0d&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#step6 @0x000*** zxenv has been customized compared to build ***&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#step22&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#ei&lt;/span&gt;

CS &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; vendor id 0xec.......
CS &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt; device id 0xda.......
doing Super block Sanity checks... location 4
doing Managment block Sanity checks ...

CS &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; vendor id 0x00.......
CS &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt; device id 0x00.......
&lt;span class=&quot;o&quot;&gt;=====================================&lt;/span&gt;
Build &lt;span class=&quot;nv&quot;&gt;date&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;Jun &lt;span class=&quot;m&quot;&gt;15&lt;/span&gt; 2012, &lt;span class=&quot;nb&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;04:10:58
&lt;span class=&quot;o&quot;&gt;=====================================&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;type &lt;/span&gt;c to quit AUTOBOOT
88:E0:A0:08:C5:D1
romfs

  Checking zboot signature..  it&lt;span class=&quot;s1&quot;&gt;&amp;#39;s a zboot file, signature OK.&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;ZBOOT_ATTR_PHY_LOAD OFF&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;g_load_addr=0x80000000,g_base_addr=0x830000b0,count=0x0070d2d4&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;Waiting for XLOAD completion.&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;XLOAD done. status = 0x6 .. OK.&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;ZBOOT_ATTR_GZIP ON&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;  Decompressing to 0x84000000 .. &lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;Output length: 0x009dfcb5(10353845)&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;Decompressing decrypted data from 0xa70004c4 to 0x84000000 OK&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;3cidxs3deaca4b67cdb5ffa460e0cdbf8b287060bb4366S&lt;/span&gt;

&lt;span class=&quot;s1&quot;&gt;#xos2P68-100 (sfla 128kbytes. subid 0x00/db) [serial#b46b37a15b3a4922660c80a48078a15f]&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#stepxmb 0xcb - 3&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#chpll 0x01000024/0x00000201 -&amp;gt; 0x01000033/0x00000101... actual sys=351MHz&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#DRAM setup (method=0x10015858) ...&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#DRAM0 Window  :    0x#2a#2a#2a#2a# (21)&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#DRAM0 Settings: WD=0x0c0c0c0c RG=0x0b0b0b0b RR=0x0b0b0b0b RF=0x0d0d0d0d&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#*** zxenv has been customized compared to build ***&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#step22&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;#ei&lt;/span&gt;

&lt;span class=&quot;s1&quot;&gt;CS 0 vendor id 0xec.......&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;CS 0 device id 0xda.......&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;doing Super block Sanity checks... location 4&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;doing Managment block Sanity checks ...&lt;/span&gt;

&lt;span class=&quot;s1&quot;&gt;CS 1 vendor id 0x00.......&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;CS 1 device id 0x00.......&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;=====================================&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;Build date=Jun 15 2012, time=04:10:58&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;=====================================&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;type c to quit AUTOBOOT&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;88:E0:A0:08:C5:D1&lt;/span&gt;
&lt;span class=&quot;s1&quot;&gt;romfs&lt;/span&gt;

&lt;span class=&quot;s1&quot;&gt;  Checking zboot signature..  it&amp;#39;&lt;/span&gt;s a zboot file, signature OK.
ZBOOT_ATTR_PHY_LOAD OFF
&lt;span class=&quot;nv&quot;&gt;g_load_addr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0x80000000,g_base_addr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0x830000b0,count&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;0x0070d2d4
Waiting &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; XLOAD completion.
XLOAD &lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;. &lt;span class=&quot;nv&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 0x6 .. OK.
ZBOOT_ATTR_GZIP ON
  Decompressing to 0x84000000 .. 
Output length: 0x009dfcb5&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;10353845&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Decompressing decrypted data from 0xa70004c4 to 0x84000000 OK&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;由于最后无法输入任何东西，至此只好放弃了。&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>编译log4cxx 和 sqlite3到arm平台</title>
   <link href="http://www.1few.com/2012/log4cxx-sqlite3-for-arm"/>
   <updated>2012-02-07T00:00:00+08:00</updated>
   <id>http://www.1few.com/2012/log4cxx-sqlite3-for-arm</id>
   <content type="html">&lt;p&gt;要编译这两种库，只需要configure之后再用make指令就行了，麻烦就麻烦在confgure时怎么指定参数，我使用下面的方式来指定./configure时的参数。&lt;/p&gt;

&lt;h3 id=&quot;log4cxxarm-linux&quot;&gt;编译log4cxx到arm-linux平台&lt;/h3&gt;

&lt;p&gt;在有了arm-linux编译器的情况下，共有三项配置来编译log4cxx:&lt;/p&gt;

&lt;h4 id=&quot;apr-configure-command&quot;&gt;1. apr configure command:&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;./configure --host&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueab --target&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueab --prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-gcc &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-g++ &lt;span class=&quot;nv&quot;&gt;ac_cv_file__dev_zero&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ac_cv_func_setpgrp_void&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;apr_cv_process_shared_works&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;apr_cv_mutex_robust_shared&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;no&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;apr_cv_tcp_nodelay_with_cork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;ac_cv_sizeof_struct_iovec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;8&amp;quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;apr_cv_mutex_recursive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;yes&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;!--more--&gt;

&lt;h4 id=&quot;apr-util&quot;&gt;2. apr-util&lt;/h4&gt;

&lt;p&gt;（我还使用我自己的expat，如果你不需要使用你自己的expat，去掉 –with-expat=/home/syler/Documents/Projects/expat/lib/ 即可&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;./configure --host&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueab --target&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueab --prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr-util --with-apr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr/ &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-gcc &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-g++ --with-expat&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/syler/Documents/Projects/expat/lib/&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;log4cxx&quot;&gt;3. log4cxx&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;./configure --host&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueab --target&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueab --prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/log4cxx --with-apr-util&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr-util --with-apr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr/ &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-gcc &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-g++&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h3 id=&quot;sqlite3arm&quot;&gt;编译sqlite3到arm平台&lt;/h3&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;./configure &lt;span class=&quot;nv&quot;&gt;CC&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-gcc &lt;span class=&quot;nv&quot;&gt;CXX&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux-gnueabi-g++ --host&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;arm-none-linux&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>log4cxx 使用方法</title>
   <link href="http://www.1few.com/2011/log4cxx-usage"/>
   <updated>2011-07-14T00:00:00+08:00</updated>
   <id>http://www.1few.com/2011/log4cxx-usage</id>
   <content type="html">&lt;h4 id=&quot;section&quot;&gt;下载链接:&lt;/h4&gt;

&lt;p&gt;&lt;a href=&quot;http://apr.apache.org/download.cgi&quot;&gt;apr&lt;/a&gt;
&lt;a href=&quot;http://logging.apache.org/log4cxx/download.html&quot;&gt;log4cxx&lt;/a&gt;&lt;/p&gt;

&lt;h4 id=&quot;apr-145&quot;&gt;第一步安装apr-1.4.5，顺序不能错，它必须首选安装&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$tar&lt;/span&gt; -zxvf apr-1.4.5.tar.gz
&lt;span class=&quot;nv&quot;&gt;$cd&lt;/span&gt; apr-1.4.5
&lt;span class=&quot;nv&quot;&gt;$.&lt;/span&gt;/configure --prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr
&lt;span class=&quot;nv&quot;&gt;$make&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$su&lt;/span&gt; root
&lt;span class=&quot;nv&quot;&gt;$make&lt;/span&gt; install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h4 id=&quot;apr-util-1312&quot;&gt;然后安装apr-util-1.3.12&lt;/h4&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$tar&lt;/span&gt; -zxvf apr-util-1.3.12.tar.gz
&lt;span class=&quot;nv&quot;&gt;$cd&lt;/span&gt; apr-util-1.3.12
&lt;span class=&quot;nv&quot;&gt;$.&lt;/span&gt;/configure --prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr-util --with-apr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr
&lt;span class=&quot;nv&quot;&gt;$make&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;$su&lt;/span&gt; root
&lt;span class=&quot;nv&quot;&gt;$make&lt;/span&gt; install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;configure选项 –with-apr=/usr/local 指定apr库的位置
&lt;!--more--&gt;
#### 安装log4cxx了&lt;/p&gt;

&lt;p&gt;在这之前,必须要改三个文件:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;$vim src/examples/cpp/console.cpp 在这个文件里添加&lt;code&gt;#include &amp;lt;stdio.h&amp;gt;&lt;/code&gt;和&lt;code&gt;#include &amp;lt;string.h&amp;gt;&lt;/code&gt;&lt;br /&gt;
$vim src/main/cpp/socketoutputstream.cpp 在这个文件里添加&lt;code&gt;#include &amp;lt;string.h&amp;gt;&lt;/code&gt;&lt;br /&gt;
$vim src/main/cpp/inputstreamreader.cpp 在这个文件里添加&lt;code&gt;#include &amp;lt;string.h&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nv&quot;&gt;$tar&lt;/span&gt; -zxvf apache-log4cxx-0.10.0.tar.gz
&lt;span class=&quot;nv&quot;&gt;$cd&lt;/span&gt; apache-log4cxx-0.10.0
&lt;span class=&quot;nv&quot;&gt;$.&lt;/span&gt;/configure --prefix&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/log4cxx --with-apr&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr --with-apr-util&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/apr-util

&lt;span class=&quot;nv&quot;&gt;$sudo&lt;/span&gt; make
&lt;span class=&quot;nv&quot;&gt;$su&lt;/span&gt; root
&lt;span class=&quot;nv&quot;&gt;$make&lt;/span&gt; install&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;最后,在terminal执行:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;sudo ldconfig&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;如果
在执行的时候，你可能会得到下面的错误：&lt;/p&gt;

&lt;div class=&quot;message&quot;&gt;
error while loading shared libraries: liblog4cxx.so.10: cannot open shared object file: No such file or directory
&lt;/div&gt;

&lt;p&gt;查找半天发现在/usr/local/lib下有liblog4cxx.so.10文件，这个问题是因为你没有设置LD_LIBRARY_PATH环境变量造成的。&lt;/p&gt;

&lt;p&gt;执行&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot; data-lang=&quot;bash&quot;&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/lib&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>libtiff 3.9.4 VC 2008编译通过版</title>
   <link href="http://www.1few.com/2010/libtiff-394-for-vc2008"/>
   <updated>2010-10-14T00:00:00+08:00</updated>
   <id>http://www.1few.com/2010/libtiff-394-for-vc2008</id>
   <content type="html">&lt;p&gt;一直以来从libtiff官网下载的libtiff在VC2008中编译不过，今天终于调试通过，需要的在这里下载项目文件。&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://onedrive.live.com/redir?resid=CFA41C888DEC156C!445&amp;amp;authkey=!AA7uzhRF1F1KfCk&amp;amp;ithint=file%2c7z&quot;&gt;libtiff3.9.4-vc2008.7z&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;也可用这个CMakeLists.txt文件
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cmake&quot; data-lang=&quot;cmake&quot;&gt;&lt;span class=&quot;nb&quot;&gt;cmake_minimum_required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;VERSION&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;2.8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;libtiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;include_directories&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;s2&quot;&gt;&amp;quot;${CMAKE_CURRENT_SOURCE_DIR}&amp;quot;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;add_definitions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;-DHAVE_STRING_H=1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# The .cpp files:&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;lib_srcs&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_stream.cxx&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_zip.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_write.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_warning.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_version.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_tile.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_thunder.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_swab.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_strip.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_read.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_print.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_predict.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_pixarlog.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_packbits.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_open.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_ojpeg.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_next.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_lzw.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_luv.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_jpeg.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_getimage.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_flush.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_fax3sm.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_fax3.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_extension.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_error.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_dumpmode.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_dirwrite.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_dirread.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_dirinfo.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_dir.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_compress.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_color.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_codec.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_close.c&lt;/span&gt;
	&lt;span class=&quot;s&quot;&gt;tif_aux.c&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;UNIX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;lib_srcs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lib_srcs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;tif_unix.c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;WIN32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;lib_srcs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lib_srcs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;tif_win32.c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;WIN32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;APPLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;lib_srcs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lib_srcs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;tif_apple.c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;APPLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;the_target&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;libtiff&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;MSVC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;CMAKE_C_FLAGS&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;${CMAKE_C_FLAGS} /W3&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;UNIX&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;CMAKE_COMPILER_IS_GNUCXX&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;OR&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;CV_ICC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;CMAKE_C_FLAGS&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;${CMAKE_C_FLAGS} -fPIC&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;endif&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;add_library&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;the_target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;SHARED&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;lib_srcs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;SET_TARGET_PROPERTIES&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;the_target&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;PROPERTIES&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;LINK_FLAGS&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/DEF:../libtiff.def&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>OpenCV的IPlImage保存为CCITT4压缩的TIFF格式</title>
   <link href="http://www.1few.com/2010/opencv-IPlImage-to-tiff"/>
   <updated>2010-09-16T00:00:00+08:00</updated>
   <id>http://www.1few.com/2010/opencv-IPlImage-to-tiff</id>
   <content type="html">&lt;p&gt;有一点要知道：提供给 libtiff 和从 libtiff 返回的缓冲区都是每个字节中包含 8 个像素，而8位灰度图是1字节只包含一个像素
OpenCV读入后都是8位灰度图，需要手动进行转换，即将临近的8个像素放入一个字节中，使用位运算即可。
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c--&quot; data-lang=&quot;c++&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IplImage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//from http://1few.com/81.html&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;uint32&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bufsize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;uint32&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;nchannels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;	
	&lt;span class=&quot;n&quot;&gt;int16&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;	
	&lt;span class=&quot;n&quot;&gt;uint32&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uint32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;uint16&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;photometric&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PHOTOMETRIC_MINISWHITE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;uint16&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PLANARCONFIG_CONTIG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;uint16&lt;/span&gt;	&lt;span class=&quot;n&quot;&gt;fillorder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FILLORDER_MSB2LSB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
	&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buf&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;uint16&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compression&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;COMPRESSION_CCITTFAX4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageDataOrigin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;nchannels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nChannels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;depth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;TIFF&lt;/span&gt;	&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TIFFOpen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_BITSPERSAMPLE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// set the size of the channels&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_COMPRESSION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;compression&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_FILLORDER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fillorder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_IMAGELENGTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_IMAGEWIDTH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_ORIENTATION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ORIENTATION_TOPLEFT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_PLANARCONFIG&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_PHOTOMETRIC&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;photometric&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_RESOLUTIONUNIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RESUNIT_INCH&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_SAMPLEFORMAT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SAMPLEFORMAT_UINT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_SAMPLESPERPIXEL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nchannels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// set number of channels per pixel&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFDefaultStripSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;TIFFSetField&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TIFFTAG_ROWSPERSTRIP&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rowsperstrip&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

	&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fax_total_cols&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;fax_total_cols&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;fax_total_cols&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fax_current_col&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_TIFFmalloc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fax_total_cols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yheight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;xwidth&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;uchar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;uchar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;imageData&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;widthStep&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;pixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pixel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fax_current_col&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;fax_current_col&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;n&quot;&gt;res&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TIFFWriteScanline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;n&quot;&gt;fax_current_col&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;


	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;_TIFFfree&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;n&quot;&gt;TIFFClose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tiff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>C++简的单测试内存泄漏</title>
   <link href="http://www.1few.com/2010/cpp-test-memory-leaks"/>
   <updated>2010-09-16T00:00:00+08:00</updated>
   <id>http://www.1few.com/2010/cpp-test-memory-leaks</id>
   <content type="html">&lt;p&gt;一直用.net，不担心内存问题，用上了C++，内存问题就要上心了。&lt;/p&gt;

&lt;p&gt;有句话叫做：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;A little memory leak is no big thing.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;但是我们还是要尽量管理好自己的内存。
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c--&quot; data-lang=&quot;c++&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include &lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;....&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;_CrtMemState&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;_CrtMemCheckpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;


&lt;span class=&quot;p&quot;&gt;.......&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;_CrtMemCheckpoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_CrtMemDifference&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;_CrtMemDumpStatistics&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Warning: this program has a memory leak.n&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;Congratulations: there is no memory leak.n&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//这句话不是用来检查漏泄，但也很常用。&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_CrtCheckMemory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>重新学习位运算</title>
   <link href="http://www.1few.com/2010/cppbit"/>
   <updated>2010-09-07T00:00:00+08:00</updated>
   <id>http://www.1few.com/2010/cppbit</id>
   <content type="html">&lt;p&gt;在学校就没有好好学清楚过位运算，今天重新学习了一下，希望所理解的都是正确的，将来再来看看。
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c--&quot; data-lang=&quot;c++&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;quot;stdafx.h&amp;quot;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;iostream&amp;gt;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_tmain&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_TCHAR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//输出20&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;/*&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;正数的补码是本身，负数的补码是其绝对值的补码按位取反再加1&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;如果计算是32位，按32位运算&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;5= 0000 0000 0000 0000 0000 0000 0000 0101&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;取反 = 1111 1111 1111 1111 1111 1111 1111 1010&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;加1 = 1111 1111 1111 1111 1111 1111 1111 1011，这是-5的补码&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;左移2= 1111 1111 1111 1111 1111 1111 1110 1100，注意这是补码&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;最左位是一个符号位，1表明这是负数，我们再倒回去求其绝对值，看看它是多少&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;减1 = 1111 1111 1111 1111 1111 1111 1011&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;取反 = 0000 0000 0000 0000 0000 0001 0100该值为20，这个值是该数的绝对值，&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;已知该数为负，所以该数为-20&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;*/&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// 输出-20&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;/*&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;-5的补码是 1111 1111 1111 1111 1111 1111 1111 1011&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;3的补码是 0000 0000 0000 0000 0000 0000 0000 0011&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;求&amp;amp; 0000 0000 0000 0000 0000 0000 0000 0011&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;这是正数，值是3&lt;/span&gt;
&lt;span class=&quot;cm&quot;&gt;*/&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;// 输出3&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 输出4，32位机的整数是4个字节，第字节有8位，这是为什么5=0000 0000 0000 0000 0000 0000 0000 0101这么长的原因。&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;system&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;pause&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 
 <entry>
   <title>解决OpenCV无法读取部分tiff文件的问题</title>
   <link href="http://www.1few.com/2010/opencv-cannot-read-tiff"/>
   <updated>2010-08-24T00:00:00+08:00</updated>
   <id>http://www.1few.com/2010/opencv-cannot-read-tiff</id>
   <content type="html">&lt;p&gt;有这样一段：&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c--&quot; data-lang=&quot;c++&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#ifndef    CCITT_SUPPORT &lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define    TIFFInitCCITTRLE    NotConfigured &lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define    TIFFInitCCITTRLEW    NotConfigured &lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define    TIFFInitCCITTFax3    NotConfigured &lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define    TIFFInitCCITTFax4    NotConfigured &lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;!--more--&gt;
&lt;p&gt;即没有define就执行NotConfigured函数，而在tiffconf.h中就有这样的定义&lt;/p&gt;

&lt;p&gt;所以，在tiff.h中加入一句:&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c--&quot; data-lang=&quot;c++&quot;&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;quot;tiffconf.h&amp;quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;然后要在libtiff的项目中添加附加包含目录：……3rdpartylibjpeg&lt;/p&gt;

&lt;p&gt;在libtiff项目属性中附加目录
重新编译openCV就可以了
可以下载我编译好的文件&lt;a href=&quot;https://onedrive.live.com/redir?resid=CFA41C888DEC156C!439&amp;amp;authkey=!AHqOjBVGUdEEGSg&amp;amp;ithint=folder%2c7z&quot;&gt;OpenCV2.1_binary.7z&lt;/a&gt;&lt;/p&gt;
</content>
 </entry>
 
 <entry>
   <title>Image.FromFile报内存不足的异常</title>
   <link href="http://www.1few.com/2010/Image-FromFile-insufficient-memory"/>
   <updated>2010-07-28T00:00:00+08:00</updated>
   <id>http://www.1few.com/2010/Image-FromFile-insufficient-memory</id>
   <content type="html">&lt;p&gt;发现用Image.FromFile打开图片的时候会报内存不足的异常，感到很奇怪，实际上不应该是内存不足，而是图片有错。&lt;/p&gt;

&lt;p&gt;所以如果用FileStream来打开图片，才可以得到更有意义的异常信息。
&lt;!--more--&gt;&lt;/p&gt;

&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-c#&quot; data-lang=&quot;c#&quot;&gt;&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OpenImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Bitmap&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dstImage&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Bitmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FromFile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fileName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dstImage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;OpenImageWithFileStream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;FileStream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FileStream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FileMode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FileAccess&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FileShare&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ibyteRead&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ibyteRead&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ibyteRead&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;ibyteRead&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FromStream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Dispose&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bitmap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

</content>
 </entry>
 

</feed>
